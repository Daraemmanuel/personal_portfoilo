import{y as B,r as w,aH as O,I as L,J as n,K as c,Q as l,ae as t,H as r,at as M,a0 as h,Z as m,R as _,W as u,aI as p,ab as f,aK as T,ai as k,aa as b}from"./vendor-core-CH6ggemF.js";import{_ as i}from"./InputError.vue_vue_type_script_setup_true_lang-C_h_UtUM.js";import{_ as S}from"./RichTextEditor.vue_vue_type_style_index_0_lang-BbbVfB3A.js";import{_ as x}from"./app-CGmCbmcn.js";import{u as A}from"./useAutoSave-BHSyTk7U.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-DnEFTYhv.js";import"./vendor-CToOQyou.js";import"./vendor-editor-zpcSff2F.js";import"./vendor-ui-B9jtnHz4.js";import"./SheetContent.vue_vue_type_script_setup_true_lang-D_ptdcDd.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DjPrsa6Z.js";const $={class:"min-h-[calc(100vh-64px)] bg-background p-4 sm:p-6 lg:p-10"},N={class:"mx-auto max-w-5xl"},P={class:"rounded-2xl border border-border bg-card p-4 shadow-sm transition-colors sm:p-6 lg:p-8"},F={class:"space-y-2"},H={class:"space-y-2"},R={class:"space-y-2"},z={class:"space-y-2"},K={class:"grid grid-cols-1 gap-8 md:grid-cols-2"},W={class:"space-y-2"},J={class:"space-y-2"},Q={key:0,class:"grid grid-cols-1 gap-8 md:grid-cols-2"},Z={class:"space-y-2"},q={class:"grid grid-cols-1 gap-8 md:grid-cols-2"},G={class:"space-y-2"},X={class:"flex items-center justify-between"},Y={class:"flex items-center gap-2"},ee=["min"],te={key:0,class:"mt-2 flex items-center gap-2 rounded-lg border border-blue-500/20 bg-blue-500/10 px-3 py-2"},re={class:"text-xs font-medium text-blue-600 dark:text-blue-400"},se={key:1,class:"text-xs text-muted-foreground/60"},oe={class:"space-y-2"},le={class:"flex items-center gap-3"},ae={class:"space-y-4"},de={key:0,class:"text-center"},ie={key:1,class:"relative w-full p-4"},ne=["src"],ue={class:"flex items-center justify-between border-t border-border pt-8"},me={class:"text-xs font-medium text-muted-foreground"},pe={key:0,class:"flex items-center gap-2"},ce={key:1},ge={class:"flex items-center gap-4"},Ue=B({__name:"Edit",props:{article:{}},setup(V){const a=V,y=w(null),g=w(a.article.featured_image_url||null),s=O({title:a.article.title,slug:a.article.slug,excerpt:a.article.excerpt,content:a.article.content,featured_image:null,category:a.article.category||"",tags:a.article.tags?a.article.tags.join(", "):"",published_at:a.article.published_at?new Date(a.article.published_at).toISOString().slice(0,16):"",series:a.article.series||"",series_order:a.article.series_order||null,is_featured:a.article.is_featured||!1,_method:"PUT"}),{isSaving:C,lastSaved:v}=A(s,route("admin.articles.update",a.article.id),{debounceMs:3e3,enabled:!0}),U=()=>{s.transform(d=>({...d,tags:d.tags.split(",").map(e=>e.trim()).filter(Boolean)})).post(route("admin.articles.update",a.article.id))},D=d=>{const e=d.target.files?.[0];e&&(s.featured_image=e,g.value=URL.createObjectURL(e))},I=()=>{y.value?.click()},j=()=>{s.featured_image=null,g.value=a.article.featured_image_url||null};return(d,e)=>(n(),L(E,{breadcrumbs:[{title:"Articles",href:d.route("admin.articles.index")},{title:"Edit",href:"#"}]},{default:c(()=>[l(r(M),{title:"Edit Article"}),t("div",$,[t("div",N,[e[29]||(e[29]=t("div",{class:"mb-6 sm:mb-10"},[t("h2",{class:"bg-gradient-to-r from-foreground to-foreground/50 bg-clip-text text-2xl font-bold tracking-tight text-transparent sm:text-3xl"}," Edit Article "),t("p",{class:"mt-1 text-sm text-muted-foreground sm:mt-2 sm:text-base"}," Update article information and content. ")],-1)),t("div",P,[t("form",{onSubmit:h(U,["prevent"]),class:"space-y-8"},[t("div",F,[e[12]||(e[12]=t("label",{class:"text-xs font-bold tracking-widest text-muted-foreground uppercase"},"Title",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r(s).title=o),type:"text",class:"w-full rounded-xl border-border bg-muted/50 px-4 py-3 text-foreground placeholder-muted-foreground/50 shadow-sm transition-all focus:border-primary focus:bg-background focus:ring-2 focus:ring-primary/20 sm:text-sm"},null,512),[[p,r(s).title]]),l(i,{message:r(s).errors.title},null,8,["message"])]),t("div",H,[e[13]||(e[13]=t("label",{class:"text-xs font-bold tracking-widest text-muted-foreground uppercase"},"Slug",-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r(s).slug=o),type:"text",class:"w-full rounded-xl border-border bg-muted/50 px-4 py-3 text-foreground placeholder-muted-foreground/50 shadow-sm transition-all focus:border-primary focus:bg-background focus:ring-2 focus:ring-primary/20 sm:text-sm"},null,512),[[p,r(s).slug]]),l(i,{message:r(s).errors.slug},null,8,["message"])]),t("div",R,[e[14]||(e[14]=t("label",{class:"text-xs font-bold tracking-widest text-muted-foreground uppercase"},"Excerpt",-1)),l(S,{modelValue:r(s).excerpt,"onUpdate:modelValue":e[2]||(e[2]=o=>r(s).excerpt=o),placeholder:"Brief summary of the article...",rows:3},null,8,["modelValue"]),l(i,{message:r(s).errors.excerpt},null,8,["message"])]),t("div",z,[e[15]||(e[15]=t("label",{class:"text-xs font-bold tracking-widest text-muted-foreground uppercase"},"Content",-1)),l(S,{modelValue:r(s).content,"onUpdate:modelValue":e[3]||(e[3]=o=>r(s).content=o),placeholder:"Write your article content here...",rows:12},null,8,["modelValue"]),l(i,{message:r(s).errors.content},null,8,["message"])]),t("div",K,[t("div",W,[e[16]||(e[16]=t("label",{class:"text-xs font-bold tracking-widest text-muted-foreground uppercase"},"Category",-1)),u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>r(s).category=o),type:"text",class:"w-full rounded-xl border-border bg-muted/50 px-4 py-3 text-foreground placeholder-muted-foreground/50 shadow-sm transition-all focus:border-primary focus:bg-background focus:ring-2 focus:ring-primary/20 sm:text-sm"},null,512),[[p,r(s).category]]),l(i,{message:r(s).errors.category},null,8,["message"])]),t("div",J,[e[17]||(e[17]=t("label",{class:"text-xs font-bold tracking-widest text-muted-foreground uppercase"},"Series (Optional)",-1)),u(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>r(s).series=o),type:"text",placeholder:"e.g. Laravel Basics",class:"w-full rounded-xl border-border bg-muted/50 px-4 py-3 text-foreground placeholder-muted-foreground/50 shadow-sm transition-all focus:border-primary focus:bg-background focus:ring-2 focus:ring-primary/20 sm:text-sm"},null,512),[[p,r(s).series]]),l(i,{message:r(s).errors.series},null,8,["message"])])]),r(s).series?(n(),m("div",Q,[t("div",Z,[e[18]||(e[18]=t("label",{class:"text-xs font-bold tracking-widest text-muted-foreground uppercase"},"Series Order",-1)),u(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>r(s).series_order=o),type:"number",min:"1",placeholder:"1, 2, 3...",class:"w-full rounded-xl border-border bg-muted/50 px-4 py-3 text-foreground placeholder-muted-foreground/50 shadow-sm transition-all focus:border-primary focus:bg-background focus:ring-2 focus:ring-primary/20 sm:text-sm"},null,512),[[p,r(s).series_order,void 0,{number:!0}]]),e[19]||(e[19]=t("p",{class:"text-xs text-muted-foreground/60"}," Order of this article in the series. ",-1)),l(i,{message:r(s).errors.series_order},null,8,["message"])])])):_("",!0),t("div",q,[t("div",G,[t("div",X,[e[20]||(e[20]=t("label",{class:"text-xs font-bold tracking-widest text-muted-foreground uppercase"},"Publish Date",-1)),t("div",Y,[t("button",{type:"button",onClick:e[7]||(e[7]=o=>r(s).published_at=new Date().toISOString().slice(0,16)),class:"text-xs font-bold text-primary transition-colors hover:text-primary/80"}," Now "),t("button",{type:"button",onClick:e[8]||(e[8]=o=>{const fe=new Date;d.tomorrow.setDate(d.tomorrow.getDate()+1),r(s).published_at=d.tomorrow.toISOString().slice(0,16)}),class:"text-xs font-bold text-muted-foreground transition-colors hover:text-foreground"}," Tomorrow ")])]),u(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>r(s).published_at=o),type:"datetime-local",min:new Date().toISOString().slice(0,16),class:"w-full rounded-xl border-border bg-muted/50 px-4 py-3 text-foreground placeholder-muted-foreground/50 shadow-sm transition-all focus:border-primary focus:bg-background focus:ring-2 focus:ring-primary/20 sm:text-sm"},null,8,ee),[[p,r(s).published_at]]),r(s).published_at?(n(),m("div",te,[t("span",re,f(new Date(r(s).published_at)<=new Date?"Published":"Scheduled for")+": "+f(new Date(r(s).published_at).toLocaleString()),1)])):(n(),m("p",se," Leave empty to save as draft. Articles without a publish date won't be visible on the public site. ")),l(i,{message:r(s).errors.published_at},null,8,["message"])])]),t("div",oe,[e[21]||(e[21]=t("label",{class:"text-xs font-bold tracking-widest text-muted-foreground uppercase"},"Tags",-1)),u(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>r(s).tags=o),type:"text",class:"w-full rounded-xl border-border bg-muted/50 px-4 py-3 text-foreground placeholder-muted-foreground/50 shadow-sm transition-all focus:border-primary focus:bg-background focus:ring-2 focus:ring-primary/20 sm:text-sm"},null,512),[[p,r(s).tags]]),l(i,{message:r(s).errors.tags},null,8,["message"])]),t("div",le,[u(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>r(s).is_featured=o),type:"checkbox",id:"is_featured",class:"h-5 w-5 rounded border-border bg-muted text-primary shadow-sm focus:ring-primary/20"},null,512),[[T,r(s).is_featured]]),e[22]||(e[22]=t("label",{for:"is_featured",class:"text-sm font-bold tracking-widest text-muted-foreground uppercase"}," Feature this article on the homepage ",-1))]),t("div",ae,[e[25]||(e[25]=t("label",{class:"text-xs font-bold tracking-widest text-muted-foreground uppercase"},"Featured Image",-1)),t("div",{class:"relative flex min-h-[200px] cursor-pointer items-center justify-center rounded-2xl border-2 border-dashed border-border bg-muted/30 transition-all hover:border-primary/50",onClick:I},[t("input",{ref_key:"imageInput",ref:y,type:"file",class:"hidden",accept:"image/*",onChange:D},null,544),g.value?(n(),m("div",ie,[t("img",{src:g.value,class:"h-64 w-full rounded-xl border border-border object-cover shadow-lg"},null,8,ne),t("button",{type:"button",onClick:h(j,["stop"]),class:"absolute top-8 right-8 flex h-10 w-10 items-center justify-center rounded-full bg-destructive text-destructive-foreground shadow-lg transition-transform hover:scale-110"},[...e[24]||(e[24]=[t("span",{class:"text-xl"},"Ã—",-1)])])])):(n(),m("div",de,[...e[23]||(e[23]=[t("div",{class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 text-primary"},[t("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])],-1),t("p",{class:"mt-3 text-sm font-medium text-foreground"}," Click to upload featured image ",-1)])]))]),l(i,{message:r(s).errors.featured_image},null,8,["message"])]),t("div",ue,[t("div",me,[r(C)?(n(),m("span",pe," Saving... ")):r(v)?(n(),m("span",ce," Last saved: "+f(r(v).toLocaleTimeString()),1)):_("",!0)]),t("div",ge,[l(r(k),{href:d.route("articles.show",a.article.slug),target:"_blank"},{default:c(()=>[l(r(x),{variant:"ghost",type:"button",class:"font-bold text-muted-foreground hover:text-foreground"},{default:c(()=>[...e[26]||(e[26]=[t("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),b(" Preview ",-1)])]),_:1})]),_:1},8,["href"]),l(r(k),{href:d.route("admin.articles.index")},{default:c(()=>[l(r(x),{variant:"ghost",type:"button",class:"font-bold text-muted-foreground hover:text-foreground"},{default:c(()=>[...e[27]||(e[27]=[b(" Cancel ",-1)])]),_:1})]),_:1},8,["href"]),l(r(x),{type:"submit",disabled:r(s).processing,class:"rounded-full bg-primary px-10 py-6 font-bold text-primary-foreground shadow-lg shadow-primary/20 transition-all hover:scale-105 active:scale-95 disabled:opacity-50"},{default:c(()=>[...e[28]||(e[28]=[b(" Update Article ",-1)])]),_:1},8,["disabled"])])])],32)])])])]),_:1},8,["breadcrumbs"]))}});export{Ue as default};
